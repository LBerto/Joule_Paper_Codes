The codes provided in this folder were created by Luca Bertoluzzi, a postdoctoral fellow at Stanford University who works with the McGehee group. The theory behind these simulations can be found in our article ... Please make sure to cite our article if you use our code for your paper. If you have any comment and/or suggestion, please write to Luca: lbertoluzzi@gmail.com

To run the simulations presented in Figures 4, 5 or 6 of our paper:

0. Download each folder. Make sure to have all the Matlab scripts in the same folder and all the python scripts and ".txt" files in the same folder.

1. Open a "main_FigureX" script with Matlab (in the "Data_simulations_Matlab" folder).

2. If you want to change the device parameters, open the "physical_param" script and change the values of the parameters you wish to modify. Note that numerical convergence is not guaranteed if you change the parameter values by multiple orders of magnitudes. Once you're done, save the script.

3. Run the "main_FigureX" script. For Figure 5, you can vary the number of bulk and surface recombination rate values by tuning "imax" and "jmax". For Figure 6, you can vary the number of ion concentration values by tuning the value of "imax". Note that for the resolution of the paper, the simulations for Figure 5A,B take about 14 hours (37*46 = 1702 data points per figure) while the simulations for Figure 6 take about 2 hours (60*4 = 240 points per figure). If you want to calculate the efficiency for one set of parameters, we recommend using the script used for Figure 4. This will take you a few seconds to minutes (depending on the values of the parameters you choose). 

4. Once the simulation is over, a ".txt" file will be generated with the variables of interest.

5. We also provide the scripts we created to plot Figures 4-6 of the paper ("Data_visualization_Python" folder). The scripts are named "Figure4_Joule_paper.ipynb" and "Figures5&6_Joule_paper.ipynb". You can open these scripts with Jupyter Notebook and execute each cell.

6. Once you have executed all the cells of a notebook, the plots of Figure 4-6 of our paper will be generated and saved as images in ".TIFF" format.
